@using Plumbery.Domain.Entities
@model List<TimeSheet>
@{
    ViewBag.Title = "Index";
}
@section Styles{
    <style>
        #ListTable_filter label {
            float: right;
        }

        #ListTable_paginate {
            float: right;
        }
    </style>
}
<div class="box">
    <div class="box-header">
        <h3 class="box-title">Work History</h3>
    </div>
    <!-- /.box-header -->
    <div class="box-body">
        <table id="ListTable" class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th>Id</th>
                    <th>Code</th>
                    <th>Date</th>
                    <th>Plumber</th>
                    <th>Site</th>
                    <th>Specific Location</th>
                    <th>DetailedLocation</th>
                    <th>Status</th>
                    <th>Description</th>
                    <th>Plumber's Time</th>
                    <th>Assistant Time</th>
                    <th>Original Quote</th>
                    <th>Quote No</th>
                    <th>SI Number</th>
                    <th>Materials</th>
                    <th>Comments</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model) {
                    SelectList materials = new SelectList(item.Materials, "StockCode", "StockCode");
                    SelectList comments =new SelectList(item.Comments, "Description", "Description");
                    <tr>
                        <td>@if (item.Id != 0) { <text>@item.Id</text> }</td>
                        <td>@if(item.Code!=null) {<text>@item.Code</text>}</td>
                        <td>@if(item.DateCreated!=null) {<text>@item.DateCreated.ToString("dd.MM.yyyy")</text>}</td>
                        <td>@if(@item.Plumber!=null) {<text>@item.Plumber.User.FullName</text>}</td>
                        <td>@if(item.Site!=null){<text>@item.Site.Abbr</text>}</td>
                        <td>@if(item.SpecificLocation!=null) {<text>@item.SpecificLocation</text>}</td>
                        <td>@if(item.DetailedPoint!=null) {<text>@item.DetailedPoint</text>}</td>
                        <td>@item.SheetStatus</td>
                        <td>@if(item.Description!=null) {<text>@item.Description</text>}</td>
                        <td>@item.PlumberTime</td>
                        <td>@item.AssistantTime</td>
                        <td>@item.OriginalQuote</td>
                        <td>@if(item.QuoteNo!=null){<text>@item.QuoteNo</text>}</td>
                        <td>@if(item.SINumber!=null) {<text>@item.SINumber</text>}</td>
                        <td>@Html.DropDownList("Materials" + item.Id,materials, new { @class = "form-control" })</td>
                        <td>@Html.DropDownList("Comments" + item.Id,comments,new { @class="form-control" })</td>
                        <td>
                            @using (Html.BeginForm("DeleteSheet", "TimeSheet", FormMethod.Post)) {
                                @Html.AntiForgeryToken()
                                <input type="hidden" value="@item.Id" name="SheetId"/>
                                <button type="submit" class="btn btn-flat btn-danger"><i class="fa fa-times"></i></button>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
@section Scripts{
    <script src="~/Content/js/plugins/Datatables/jquery.dataTables.min.js"></script>
    <script src="~/Content/js/plugins/Datatables/dataTables.bootstrap.min.js"></script>
    <script src="~/Content/js/plugins/Datatables/dataTables.Responsive.js"></script>
    <script>
        $(function () {
            $("#ListTable").DataTable({
                "paging": true,
                "lengthChange": true,
                "searching": true,
                "ordering": true,
                "info": true,
                "autoWidth": true,
                "scrollX": true,
                "responsive": true
            });
        });
    </script>
}